#include <iostream>

class Parent
{
public:
    virtual void Food() {}
    virtual void FooNotOverridden() {}
};

class Derived : public Parent
{
public:
    void Food() override {}
};

int main(int argc __attribute__((unused)), char const *argv[] __attribute__((unused)))
{
    Parent p1, p2;
    Derived d1, d2;

    std::cout << "done" << std::endl;
    return 0;
}

#if 0
(gdb) info vtbl p1
vtable for 'Parent' @ 0x555555756cc0 (subobject @ 0x7fffffffdd38):
[0]: 0x555555555ece <Parent::Food()>
[1]: 0x555555555eda <Parent::FooNotOverridden()>
(gdb) info vtbl d1
vtable for 'Derived' @ 0x555555756ca0 (subobject @ 0x7fffffffdd48):
[0]: 0x555555555ee6 <Derived::Food()>
[1]: 0x555555555eda <Parent::FooNotOverridden()>
(gdb) x/300xb  0x555555756c90
0x555555756c90 <vtable for Derived>:	0x00	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756c98 <vtable for Derived+8>:	0x10	0x6d	0x75	0x55	0x55	0x55	0x00	0x00
0x555555756ca0 <vtable for Derived+16>:	0xe6	0x5e	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756ca8 <vtable for Derived+24>:	0xda	0x5e	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756cb0 <vtable for Parent>:	0x00	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756cb8 <vtable for Parent+8>:	0x28	0x6d	0x75	0x55	0x55	0x55	0x00	0x00
0x555555756cc0 <vtable for Parent+16>:	0xce	0x5e	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756cc8 <vtable for Parent+24>:	0xda	0x5e	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756cd0 <base::__OS>:	0x20	0x70	0x75	0x55	0x55	0x55	0x00	0x00
0x555555756cd8 <typeinfo for A>:	0x38	0x74	0xdc	0xf7	0xff	0x7f	0x00	0x00
0x555555756ce0 <typeinfo for A+8>:	0xe7	0x5f	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756ce8 <typeinfo for A+16>:	0xf0	0x6c	0x75	0x55	0x55	0x55	0x00	0x00
0x555555756cf0 <typeinfo for base>:	0xf8	0x67	0xdc	0xf7	0xff	0x7f	0x00	0x00
0x555555756cf8 <typeinfo for base+8>:	0xea	0x5f	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756d00 <typeinfo for func_trace>:	0xf8	0x67	0xdc	0xf7	0xff	0x7f	0x00	0x00
0x555555756d08 <typeinfo for func_trace+8>:	0x18	0x60	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756d10 <typeinfo for Derived>:	0x38	0x74	0xdc	0xf7	0xff	0x7f	0x00	0x00
0x555555756d18 <typeinfo for Derived+8>:	0x30	0x60	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756d20 <typeinfo for Derived+16>:	0x28	0x6d	0x75	0x55	0x55	0x55	0x00	0x00
0x555555756d28 <typeinfo for Parent>:	0xf8	0x67	0xdc	0xf7	0xff	0x7f	0x00	0x00
0x555555756d30 <typeinfo for Parent+8>:	0x40	0x60	0x55	0x55	0x55	0x55	0x00	0x00
0x555555756d38:	0x01	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d40:	0x01	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d48:	0x01	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d50:	0x8d	0x02	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d58:	0x01	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d60:	0xaa	0x02	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d68:	0x0c	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d70:	0x18	0x17	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d78:	0x0d	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d80:	0x74	0x1f	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d88:	0x19	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756d90:	0x08	0x2c	0x20	0x00	0x00	0x00	0x00	0x00
0x555555756d98:	0x1b	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756da0:	0x20	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756da8:	0x1a	0x00	0x00	0x00	0x00	0x00	0x00	0x00
0x555555756db0:	0x28	0x2c	0x20	0x00	0x00	0x00	0x00	0x00

(gdb) info vtbl p1
vtable for 'Parent' @ 0x555555756cc0 (subobject @ 0x7fffffffdd38):
[0]: 0x555555555ece <Parent::Food()>
[1]: 0x555555555eda <Parent::FooNotOverridden()>
(gdb) info vtbl p2
vtable for 'Parent' @ 0x555555756cc0 (subobject @ 0x7fffffffdd40):
[0]: 0x555555555ece <Parent::Food()>
[1]: 0x555555555eda <Parent::FooNotOverridden()>

#endif
